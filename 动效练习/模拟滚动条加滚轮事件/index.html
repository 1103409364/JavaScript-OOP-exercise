<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>模拟滚动条</title>
    <style>
        .wrap {
            width: 600px;
            height: 400px;
            border: 1px solid #d8d5d5;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .wrap #content {
            position: relative;
            padding: 20px 30px 20px 20px;
        }

        .wrap #content h3 {
            text-align: center;
        }
        
        .wrap #content p {
            text-indent: 2em;
        }

        .pathway {
            position: absolute;
            height: 100%;
            width: 15px;
            background-color: #d8d5d5;
            right: 0;
            top: 0;
        }

        .pathway .ctr {
            position: absolute;
            right: 0;
            top: 0;
            width: 100%;
            height: 50px;
            background-color: #6e6e6e;
        }
    </style>
</head>

<body>
    <div class="wrap" id="wrap">
        <div id="content">
            <h3>央视3·15晚会曝光的问题解决了吗？</h3>
            <p>
                2009年，消费者权益保护法修订。而据潇湘晨报记者不完全统计，2009年到2018年，央视共曝光侵权案例70余件，其中汽车及配件问题被曝光9次，食品问题被曝光7次，日用品质量问题被曝光6次，个人信息安全问题被曝光6次，保健食品及非法会销被曝光5次，医药及医疗用品问题被曝光5次，这些都是十年间多次出现的问题。
            </p>

            <p>
                然而，今年2月27日，工信部公布了2018年第四季度检测发现问题的应用软件名单，来自百度手机助手的“万能看“和来自PC141软件下载站的”校内外“两款APP未经用户同意，收集、使用用户个人信息。
            </p>

            <p>
                在汽车维修行业，以换配件代替局部维修，也已成为一条潜规则。“不过，那时候是哪个零件坏了换哪个。现在不同了。通常要是换，就是换总成。”汽车维修专家王凯（化名）用车辆发电机举例。一台豪华车用发电机不工作，可能是缺少碳酸，要做的可能就是加注碳酸即可，花费不过几百块，但4S店可能就说要更换整个发电机，开价一两万。“对于客户来讲，修与换的差价是多少，我们可想而知。但对于4S店来说不会轻易给你更换。严格来说，他们不会这样给你做。”王凯告诉记者，有时在更换单件的过程中，“我们会发现，成本和时间都要节约很多。”
            </p>

            <p>
                2018年，共享单车押金难退登上了央视“3·15”晚会。现在还有多少用户在等待着退押金？ofo公关没有告诉记者确切数字，只是告诉记者，“用户的排队退押金一直在有序进行中。”
            </p>
            <p>
                2009年，消费者权益保护法修订。而据潇湘晨报记者不完全统计，2009年到2018年，央视共曝光侵权案例70余件，其中汽车及配件问题被曝光9次，食品问题被曝光7次，日用品质量问题被曝光6次，个人信息安全问题被曝光6次，保健食品及非法会销被曝光5次，医药及医疗用品问题被曝光5次，这些都是十年间多次出现的问题。
            </p>

            <p>
                然而，今年2月27日，工信部公布了2018年第四季度检测发现问题的应用软件名单，来自百度手机助手的“万能看“和来自PC141软件下载站的”校内外“两款APP未经用户同意，收集、使用用户个人信息。
            </p>

            <p>
                在汽车维修行业，以换配件代替局部维修，也已成为一条潜规则。“不过，那时候是哪个零件坏了换哪个。现在不同了。通常要是换，就是换总成。”汽车维修专家王凯（化名）用车辆发电机举例。一台豪华车用发电机不工作，可能是缺少碳酸，要做的可能就是加注碳酸即可，花费不过几百块，但4S店可能就说要更换整个发电机，开价一两万。“对于客户来讲，修与换的差价是多少，我们可想而知。但对于4S店来说不会轻易给你更换。严格来说，他们不会这样给你做。”王凯告诉记者，有时在更换单件的过程中，“我们会发现，成本和时间都要节约很多。”
            </p>

            <p>
                2018年，共享单车押金难退登上了央视“3·15”晚会。现在还有多少用户在等待着退押金？ofo公关没有告诉记者确切数字，只是告诉记者，“用户的排队退押金一直在有序进行中。”
                <p>
                    2018年，共享单车押金难退登上了央视“3·15”晚会。现在还有多少用户在等待着退押金？ofo公关没有告诉记者确切数字，只是告诉记者，“用户的排队退押金一直在有序进行中。”
                </p>
                <p>
                    2009年，消费者权益保护法修订。而据潇湘晨报记者不完全统计，2009年到2018年，央视共曝光侵权案例70余件，其中汽车及配件问题被曝光9次，食品问题被曝光7次，日用品质量问题被曝光6次，个人信息安全问题被曝光6次，保健食品及非法会销被曝光5次，医药及医疗用品问题被曝光5次，这些都是十年间多次出现的问题。
                </p>

                <p>
                    然而，今年2月27日，工信部公布了2018年第四季度检测发现问题的应用软件名单，来自百度手机助手的“万能看“和来自PC141软件下载站的”校内外“两款APP未经用户同意，收集、使用用户个人信息。
                </p>

                <p>
                    在汽车维修行业，以换配件代替局部维修，也已成为一条潜规则。“不过，那时候是哪个零件坏了换哪个。现在不同了。通常要是换，就是换总成。”汽车维修专家王凯（化名）用车辆发电机举例。一台豪华车用发电机不工作，可能是缺少碳酸，要做的可能就是加注碳酸即可，花费不过几百块，但4S店可能就说要更换整个发电机，开价一两万。“对于客户来讲，修与换的差价是多少，我们可想而知。但对于4S店来说不会轻易给你更换。严格来说，他们不会这样给你做。”王凯告诉记者，有时在更换单件的过程中，“我们会发现，成本和时间都要节约很多。”
                </p>

                <p>
                    2018年，共享单车押金难退登上了央视“3·15”晚会。现在还有多少用户在等待着退押金？ofo公关没有告诉记者确切数字，只是告诉记者，“用户的排队退押金一直在有序进行中。”
                </p>
        </div>

        <!-- 滚动条轨道 -->
        <div class="pathway" id="pathway">
            <i class="ctr" id="ctrBar"></i>
        </div>
    </div>

    <script>
        var wrap = document.getElementById("wrap");
        var ctrBar = document.getElementById("ctrBar");
        var pathway = document.getElementById("pathway");
        var content = document.getElementById("content");
        var contentHeight = content.clientHeight,
            pathwayHeight = pathway.clientHeight,
            visibleHeight = wrap.clientHeight,
            // 内容长度和轨道长度的比
            rate = contentHeight / pathwayHeight
        // 根据内容高度 计算滑块高度
        // 可见区高度/内容高度 == 滚动条高度/轨道长度
        var ctrHeight = pathwayHeight * 1 / rate;
        ctrBar.style.height = ctrHeight + "px";
        // 信号量y 滑块的top值
        var y = 0;

        // 监听滚动条滑块
        ctrBar.onmousedown = function (event) {
            event = event || window.event;
            // 计算拖拽差值
            var deltaY = event.clientY - this.offsetTop;
            document.onmousemove = function (event) {
                // console.log(1)
                event = event || window.event;
                y = event.clientY - deltaY;
                if (y < 0) {
                    y = 0;
                }
                if (y > pathwayHeight - ctrHeight) {
                    y = pathwayHeight - ctrHeight;
                }
                ctrBar.style.top = y + "px";
                content.style.top = -y * rate + "px";
            }

            document.onmouseup = function () {
                document.onmousemove = null;
            }
            return false;
        }

        content.onmousewheel = mouseWheelhandler;

        try {
            // 火狐兼容写法,ie8会报错？
            content.addEventListener("DOMMouseScroll", mouseWheelhandler);
        } catch (err) {}

        function mouseWheelhandler(event) {
            event = event || window.event;
            // 能力检测，ie678不兼容
            if (event.preventDefault) {
                event.preventDefault();
            } else {
                event.returnValue = false;
            }
            // 向上滚动返回1向下-1
            if (event.wheelDelta) {
                var direction = event.wheelDelta > 0 ? 1 : -1;
            } else if (event.detail) {
                // 火狐用detail
                var direction = event.detail > 0 ? -1 : 1;
            }

            y += -5 * direction;
            // y作为滑块的top值，可以使用相同约束条件
            if (y < 0) {
                y = 0;
            }
            if (y > pathwayHeight - ctrHeight) {
                y = pathwayHeight - ctrHeight;
            }
            ctrBar.style.top = y + "px";
            this.style.top = -y * rate + "px";
        }
    </script>
</body>

</html>